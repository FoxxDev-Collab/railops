# RailOps: Fresh Implementation Plan

## Project Overview

**Vision:** Cloud-native model railroad operations platform that modernizes waybill/manifest generation and eliminates the tedious paperwork that hobbyists currently manage with spreadsheets, JMRI, or physical car cards.

**Target Users:** Model railroad enthusiasts (HO/N scale primarily), clubs, and solo operators who want realistic operations without the admin burden.

**Core Value Prop:** "Spend less time on paperwork, more time running trains"

---

## Technical Stack (Confirmed)

```
Frontend:     Next.js 15 (App Router), TypeScript, Tailwind CSS, shadcn/ui
Backend:      Next.js Server Actions
Database:     Vercel Postgres (Hobby: 256MB, 60 hours compute/month)
ORM:          Prisma
Auth:         NextAuth.js v5
File Storage: Vercel Blob (Hobby: 1GB storage, 1GB bandwidth/month)
Deployment:   Vercel Hobby (1 project, serverless functions)
Email:        Resend (optional, 100 emails/day free tier)
Analytics:    Vercel Analytics (included in hobby)
```

---

## Vercel Hobby Tier Considerations

**Limits:**
- ‚úÖ 1GB Blob storage (sufficient for 200-500 user images at ~2-5MB each)
- ‚úÖ 256MB Postgres (can handle ~50-100 active users with full layouts)
- ‚úÖ 60 hours compute/month (serverless, plenty for MVP)
- ‚úÖ 100GB bandwidth/month
- ‚ö†Ô∏è No team collaboration (you'll be solo dev)
- ‚ö†Ô∏è No commercial use restrictions (check ToS when monetizing)

**Strategy:** Build MVP on hobby tier, migrate to Pro ($20/mo) when you hit 50+ active users or need team features.

---

## 8-Week MVP Implementation Plan

### **Week 0: Project Setup & Foundation** (Jan 12-18)

**Goal:** Get local development environment running with auth + database

**Tasks:**
```bash
# Day 1: Project initialization
‚ñ° Create Next.js 15 project: npx create-next-app@latest railops
  - App Router ‚úì
  - TypeScript ‚úì
  - Tailwind ‚úì
  - ESLint ‚úì
‚ñ° Initialize Git repo
‚ñ° Create Vercel project (link to GitHub)
‚ñ° Install dependencies:
  - @prisma/client, prisma
  - next-auth@beta
  - @vercel/blob, @vercel/postgres
  - zod
  - shadcn/ui components

# Day 2-3: Database setup
‚ñ° Create Vercel Postgres database (hobby tier)
‚ñ° Copy DATABASE_URL and DIRECT_URL to .env.local
‚ñ° Create Prisma schema (use the one from our previous conversation)
‚ñ° Run: npx prisma db push
‚ñ° Run: npx prisma generate
‚ñ° Test connection: npx prisma studio

# Day 4-5: Authentication
‚ñ° Set up NextAuth.js v5 with credentials provider
‚ñ° Create auth.ts config file
‚ñ° Add login/signup pages
‚ñ° Create middleware.ts for protected routes
‚ñ° Test: Can create account and sign in

# Day 6-7: Base UI components
‚ñ° Install shadcn/ui: npx shadcn-ui@latest init
‚ñ° Add components: button, input, label, card, dialog, dropdown
‚ñ° Create app layout with sidebar navigation
‚ñ° Create dashboard page skeleton
‚ñ° Deploy to Vercel and test production build
```

**Deliverable:** Working auth system, database connected, deployed to production

---

### **Week 1: Layout Management** (Jan 19-25)

**Goal:** Users can create and manage model railroad layouts

**Tasks:**
```bash
# Day 1-2: Layout CRUD actions
‚ñ° Create app/actions/layouts.ts
  - createLayout()
  - getLayouts()
  - getLayout(id)
  - updateLayout()
  - deleteLayout()
‚ñ° Add Zod validation schemas
‚ñ° Test actions in console

# Day 3-4: Layout UI
‚ñ° Create app/(dashboard)/layouts/page.tsx (list view)
‚ñ° Create app/(dashboard)/layouts/[id]/page.tsx (detail view)
‚ñ° Create app/(dashboard)/layouts/new/page.tsx (create form)
‚ñ° Add "Create Layout" dialog with form
‚ñ° Show layout cards with stats (stations, cars, engines)

# Day 5: Image uploads
‚ñ° Set up Vercel Blob (create store in Vercel dashboard)
‚ñ° Create app/actions/uploads.ts
‚ñ° Add uploadLayoutImage() action
‚ñ° Create image upload component with preview
‚ñ° Test: Upload layout diagram/photo

# Day 6-7: Polish & testing
‚ñ° Add loading states (Suspense)
‚ñ° Add error handling
‚ñ° Add empty states ("Create your first layout")
‚ñ° Test: Create, view, edit, delete layout
‚ñ° Deploy and verify in production
```

**Deliverable:** Fully functional layout management with image uploads

---

### **Week 2: Stations & Industries** (Jan 26-Feb 1)

**Goal:** Users can add stations and industries to their layouts

**Tasks:**
```bash
# Day 1-2: Station CRUD
‚ñ° Create app/actions/stations.ts
‚ñ° Add station form with fields:
  - Name, code, location, population
  - Goods served (multi-select)
‚ñ° Create station list page
‚ñ° Add station detail view
‚ñ° Test CRUD operations

# Day 3-4: Industries
‚ñ° Create app/actions/industries.ts
‚ñ° Add industry form:
  - Name, type, capacity
  - Ships/receives goods
  - Spot count, track length
‚ñ° Nest industries under stations
‚ñ° Create industry list/form components

# Day 5: Station images & map
‚ñ° Add station image upload
‚ñ° Add optional lat/lng fields
‚ñ° Create simple station map view (optional)
‚ñ° Test image uploads

# Day 6-7: UI polish
‚ñ° Add search/filter to station list
‚ñ° Add station count to layout overview
‚ñ° Create station quick-add from layout page
‚ñ° Test: Add 10+ stations to a layout
‚ñ° Deploy
```

**Deliverable:** Stations and industries fully functional

---

### **Week 3: Rolling Stock & Engines** (Feb 2-8)

**Goal:** Users can inventory their model railroad equipment

**Tasks:**
```bash
# Day 1-2: Rolling stock CRUD
‚ñ° Create app/actions/rolling-stock.ts
‚ñ° Add car form:
  - Reporting marks, number
  - Type (dropdown), subtype, length
  - Commodities (multi-select)
  - Home station
‚ñ° Create car list with filtering by type
‚ñ° Add car detail view with image

# Day 3-4: Engines
‚ñ° Create app/actions/engines.ts
‚ñ° Add engine form:
  - Road, number, model
  - Type, horsepower, fuel type
  - Can pull (# of cars)
‚ñ° Create engine list
‚ñ° Add engine detail view

# Day 5: Bulk import (optional)
‚ñ° Create CSV import for rolling stock
‚ñ° Parse CSV and validate
‚ñ° Show import preview
‚ñ° Batch create in database

# Day 6-7: Polish
‚ñ° Add car/engine quick stats to dashboard
‚ñ° Add search functionality
‚ñ° Test: Add 20+ cars and 3+ engines
‚ñ° Deploy
```

**Deliverable:** Complete equipment inventory system

---

### **Week 4: Routes & Route Builder** (Feb 9-15)

**Goal:** Users can create routes with multiple stops

**Tasks:**
```bash
# Day 1-2: Route data model
‚ñ° Create app/actions/routes.ts
‚ñ° Test creating routes with stops in database
‚ñ° Verify cascade deletes work

# Day 3-5: Route builder UI
‚ñ° Create route form:
  - Name, number, symbol
  - Assign engine (dropdown)
  - Departure time
‚ñ° Create stop builder:
  - Add/remove stops
  - Drag-and-drop ordering (dnd-kit)
  - Station selector for each stop
  - Arrival/departure times
‚ñ° Show route on map (stations connected)

# Day 6-7: Route management
‚ñ° Create route list page
‚ñ° Add route detail view
‚ñ° Add "Activate/Deactivate" toggle
‚ñ° Test: Create 3-stop route
‚ñ° Deploy
```

**Deliverable:** Route creation with visual builder

---

### **Week 5: Waybills & Manifest Generation** (Feb 16-22)

**Goal:** Generate printable manifests for operations sessions

**Tasks:**
```bash
# Day 1-2: Waybill CRUD
‚ñ° Create app/actions/waybills.ts
‚ñ° Add waybill form:
  - Assign to route
  - Select car from dropdown
  - Commodity, weight
  - Origin/destination stations
  - Pickup/setout locations
‚ñ° Create waybill list for route

# Day 3-4: Manifest generation
‚ñ° Create app/actions/manifests.ts
‚ñ° Build generateManifest(routeId) action
‚ñ° Create manifest view page:
  - Route header (name, engine, date)
  - Stops listed in order
  - Waybills grouped by pickup/setout
‚ñ° Add "Print Manifest" button

# Day 5: PDF export
‚ñ° Install @react-pdf/renderer or jsPDF
‚ñ° Create PDF template for manifest
‚ñ° Add downloadManifestPDF() action
‚ñ° Test PDF generation

# Day 6-7: Waybill workflow
‚ñ° Add status updates (Pending ‚Üí In Transit ‚Üí Delivered)
‚ñ° Create waybill status board
‚ñ° Test complete workflow:
  1. Create route
  2. Add waybills
  3. Generate manifest
  4. Print/download
‚ñ° Deploy
```

**Deliverable:** End-to-end operations workflow

---

### **Week 6: Operating Sessions (Optional)** (Feb 23-Mar 1)

**Goal:** Track sessions and log events

**Tasks:**
```bash
# Day 1-2: Session management
‚ñ° Create app/actions/sessions.ts
‚ñ° Add "New Session" form
‚ñ° Link routes to session
‚ñ° Add session detail view

# Day 3-4: Session board
‚ñ° Create real-time session view
‚ñ° Show active routes
‚ñ° Display waybill status
‚ñ° Add simple event logging

# Day 5-7: Session history
‚ñ° Create session list
‚ñ° Add session summary stats
‚ñ° Test: Run complete session
‚ñ° Deploy

# OR skip this week and focus on polish
```

**Deliverable:** Session tracking (optional for MVP)

---

### **Week 7: Polish, Testing & Docs** (Mar 2-8)

**Goal:** Production-ready application

**Tasks:**
```bash
# Day 1-2: UI/UX polish
‚ñ° Consistent spacing, colors, typography
‚ñ° Add loading skeletons everywhere
‚ñ° Improve error messages
‚ñ° Add success toasts
‚ñ° Mobile responsive testing
‚ñ° Dark mode (if using shadcn/ui)

# Day 3: Performance optimization
‚ñ° Add React.Suspense boundaries
‚ñ° Optimize images (next/image)
‚ñ° Add database indexes for common queries
‚ñ° Test page load speeds

# Day 4-5: Testing
‚ñ° Write tests for critical Server Actions
‚ñ° Test all forms with validation errors
‚ñ° Test file uploads (edge cases)
‚ñ° Cross-browser testing
‚ñ° Mobile device testing

# Day 6-7: Documentation
‚ñ° Write README with setup instructions
‚ñ° Create user guide (basic "Getting Started")
‚ñ° Add help tooltips in UI
‚ñ° Create demo video (Loom)
‚ñ° Deploy final version
```

**Deliverable:** Polished, tested application

---

### **Week 8: Beta Launch** (Mar 9-15)

**Goal:** Get first 10 users and gather feedback

**Tasks:**
```bash
# Day 1: Landing page
‚ñ° Create marketing site (can be same Next.js app)
‚ñ° Add waitlist form
‚ñ° Write compelling copy
‚ñ° Add demo screenshots/video

# Day 2: Analytics setup
‚ñ° Enable Vercel Analytics
‚ñ° Add PostHog (optional, free tier)
‚ñ° Set up error tracking (Sentry free tier)
‚ñ° Create feedback form (Typeform)

# Day 3-4: Community outreach
‚ñ° Post on Model Railroad Hobbyist forum
‚ñ° Post on r/modeltrains
‚ñ° Post on TrainBoard.com
‚ñ° Email NMRA division contacts
‚ñ° Share on Twitter/LinkedIn

# Day 5-7: Support & iteration
‚ñ° Respond to feedback within 24h
‚ñ° Fix critical bugs immediately
‚ñ° Log feature requests
‚ñ° Schedule 1:1 calls with interested users
‚ñ° Iterate based on feedback
```

**Deliverable:** 10+ beta users testing the app

---

## Initial Project Setup Checklist

**Before you write any code:**

```bash
# 1. Create Vercel account & project
‚ñ° Sign up at vercel.com (use GitHub OAuth)
‚ñ° Create new project ‚Üí Import Git repository
‚ñ° Connect to GitHub (auto-deploy on push)

# 2. Create Vercel Postgres database
‚ñ° Go to project ‚Üí Storage ‚Üí Create Database
‚ñ° Choose Postgres
‚ñ° Copy DATABASE_URL
‚ñ° Copy DIRECT_URL (for migrations)

# 3. Create Vercel Blob store
‚ñ° Go to project ‚Üí Storage ‚Üí Create Blob Store
‚ñ° Name it "railops-uploads"
‚ñ° Copy BLOB_READ_WRITE_TOKEN

# 4. Set environment variables
‚ñ° Add to .env.local (local dev):
  - DATABASE_URL
  - DIRECT_URL
  - BLOB_READ_WRITE_TOKEN
  - NEXTAUTH_SECRET (generate with: openssl rand -base64 32)
  - NEXTAUTH_URL=http://localhost:3000

‚ñ° Add same vars to Vercel project settings
  (Settings ‚Üí Environment Variables)

# 5. Initialize project
‚ñ° npx create-next-app@latest railops --typescript --tailwind --app
‚ñ° cd railops
‚ñ° npm install @prisma/client prisma next-auth@beta @vercel/blob zod bcryptjs
‚ñ° npm install -D @types/bcryptjs

# 6. Initialize Prisma
‚ñ° npx prisma init
‚ñ° Copy the schema from our previous conversation
‚ñ° npx prisma generate
‚ñ° npx prisma db push

# 7. Initialize shadcn/ui
‚ñ° npx shadcn-ui@latest init
‚ñ° npx shadcn-ui@latest add button input label card

# 8. First commit
‚ñ° git add .
‚ñ° git commit -m "Initial setup"
‚ñ° git push origin main
‚ñ° Verify Vercel auto-deploys
```

---

## Feature Prioritization (MVP vs. Future)

### **MVP (Must Have - Week 0-7)**
‚úÖ Authentication (email/password)
‚úÖ Layout CRUD with images
‚úÖ Station CRUD with industries
‚úÖ Rolling stock inventory
‚úÖ Engine inventory
‚úÖ Route creation with stops
‚úÖ Waybill generation
‚úÖ Manifest printing/PDF export

### **Post-MVP (Week 8+)**
üîÑ Operating sessions tracking
üîÑ OAuth providers (Google)
üîÑ Payment integration (Stripe)
üîÑ Multi-user organizations
üîÑ CSV bulk import
üîÑ Advanced analytics
üîÑ Mobile app (React Native)
üîÑ Real-time collaboration
üîÑ Automated traffic generation

### **Nice to Have (Future)**
üí° DCC hardware integration API
üí° Layout designer (visual track planning)
üí° Weather/time-of-day simulation
üí° Financial tracking (revenue/expenses)
üí° Historical performance analytics
üí° Public layout sharing

---

## Cost Breakdown (Monthly)

**Development (Hobby Tier - FREE):**
- Vercel Hobby: $0
- Vercel Postgres: $0 (256MB included)
- Vercel Blob: $0 (1GB included)
- GitHub: $0
- Domain (optional): ~$12/year

**Post-Launch (When you hit limits):**
- Vercel Pro: $20/month (first paid tier)
  - 1TB bandwidth
  - Unlimited team members
  - Commercial use allowed
- Vercel Postgres Pro: $10/month (starts at 512MB)
- Vercel Blob: $0.15/GB storage + $0.20/GB bandwidth

**Estimate for 50 active users:**
- Vercel Pro: $20
- Postgres (2GB): ~$20
- Blob (5GB storage): ~$1
- **Total: ~$41/month**

**Break-even at 50 users:**
- Charge $10/month per user
- 5 paying users = $50/month = profitable

---

## Success Metrics

**Week 4 (Alpha):**
- [ ] 5 layouts created
- [ ] 50+ stations added
- [ ] 100+ cars inventoried
- [ ] 3+ routes created

**Week 8 (Beta):**
- [ ] 10 active users
- [ ] 5+ users generate 2nd manifest (retention)
- [ ] <5% error rate
- [ ] 3+ testimonials collected

**Month 3:**
- [ ] 50 active users
- [ ] 5 paying customers ($10/mo)
- [ ] $50 MRR
- [ ] 10+ user-submitted feature requests

**Month 6:**
- [ ] 200 users
- [ ] 25 paying customers
- [ ] $250 MRR
- [ ] First club customer ($30/mo)
- [ ] Featured in Model Railroader magazine/forum

---

## Risk Mitigation

**Technical Risks:**
1. **Vercel hobby limits hit early**
   - Mitigation: Monitor usage in dashboard, have $20 ready to upgrade
2. **Database migrations in production**
   - Mitigation: Always test migrations locally first, use `prisma migrate deploy`
3. **File storage costs exceed budget**
   - Mitigation: Compress images on upload, set max file sizes, use CDN

**Product Risks:**
1. **Users prefer free JMRI**
   - Mitigation: Focus on UX, collaboration, cloud backup as differentiators
2. **Aging demographic resists cloud**
   - Mitigation: Offer white-glove onboarding, video tutorials, phone support
3. **Market too small**
   - Mitigation: Expand to train simulation gamers, expand to European market

---

## Quick Start Commands

```bash
# Create project
npx create-next-app@latest railops --typescript --tailwind --app
cd railops

# Install dependencies
npm install @prisma/client prisma next-auth@beta @vercel/blob @vercel/postgres zod bcryptjs
npm install -D @types/bcryptjs tsx

# Initialize Prisma
npx prisma init

# Copy schema (paste the Prisma schema from earlier)
# Then:
npx prisma generate
npx prisma db push

# Initialize shadcn/ui
npx shadcn-ui@latest init
npx shadcn-ui@latest add button input label card form dialog

# Run dev server
npm run dev

# Open browser
open http://localhost:3000
```

---

## Daily Development Workflow

```bash
# Morning
1. Pull latest: git pull origin main
2. Check Vercel dashboard for errors
3. Review user feedback (if any)
4. Pick today's task from week plan

# During dev
1. Work in feature branch: git checkout -b feature/add-stations
2. Make small, frequent commits
3. Test locally before pushing
4. Use Prisma Studio to verify data: npx prisma studio

# End of day
1. Push to GitHub: git push origin feature/add-stations
2. Create PR, merge to main
3. Verify Vercel auto-deploys
4. Test in production
5. Update progress in README
```

---

## Next Steps (Right Now)

**To start TODAY:**

1. **Create Vercel account** (5 min)
2. **Initialize Next.js project** (10 min)
3. **Set up Postgres + Blob** (15 min)
4. **Copy Prisma schema** (5 min)
5. **Push first commit** (5 min)
6. **Verify deployment** (5 min)

**Total: ~45 minutes to first deploy**

Then start Week 0 tasks tomorrow.

---

**Ready to start?** Let me know when you've completed the "Quick Start Commands" and I'll help you with the authentication setup (NextAuth.js v5 configuration) as your next step!